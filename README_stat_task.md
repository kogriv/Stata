## Два мешка в палатке. Стратегия подготовки
Вы вместе с другом или подругой находитесь на прогулке. К вам
подходит ведущий и предлагает поучаствовать в простом конкурсе.
Условия конкурса: есть закрытая и звукоизолированная палатка,
внутри находятся два мешка с бильярдными шарами по 100 шаров в
каждом. Шары в одном мешке имеют номера на них, шары во втором -
не содержат номеров. Ваш друг или подруга могут зайти в шатер и
как-то повзаимодействовать с шарами, например, переложить их из
одного мешка в другой. Забирать с собой или оставлять шар вне
мешка нельзя. После вашего спутника вы так же заходите в палатку.
Перед вашим заходом шары внутри каждого из мешков
перемешиваются. Ваша цель - вытащить шар с номером на нем.
Вытаскивать шар вы будете вслепую, т.е. не видя содержимое мешка
(и сколько в нем шаров, например). Вытащить можно только один
шар. Перед началом этого конкурса у вас есть возможность обсудить
со своим другом или подругой стратегию, чтобы максимизировать
шансы вытащить нужный шар. Какую стратегию вы выберете и
почему?

Для оптимизации количества перекладываемых шаров и нахождения максимальной вероятности, нужно проанализировать вероятности в общем виде. Пусть $k$ — количество пронумерованных шаров, перемещенных из мешка с номерами в мешок без номеров.

Обозначим:
- $n = 100$ — общее количество шаров в каждом мешке.
- $k$ — количество пронумерованных шаров, перемещенных в другой мешок.

Тогда:
- В мешке с номерами остается $n - k$ пронумерованных шаров.
- В мешке без номеров будет $k$ пронумерованных шаров и $n$ непомеченных шаров.

### Общая вероятность

1. **Если вы выбрали мешок с $n - k$ пронумерованными шарами:**
- Вероятность выбрать этот мешок: $\frac{1}{2}$
- Вероятность вытащить пронумерованный шар из этого мешка: $\frac{n-k}{n-k} = 1$

Итоговая вероятность для этого случая: $\frac{1}{2} \times 1 = \frac{1}{2}$

2. **Если вы выбрали мешок с $k$ пронумерованными шарами и $n$ непомеченными шарами:**
- Вероятность выбрать этот мешок: $\frac{1}{2}$
- Вероятность вытащить пронумерованный шар из этого мешка: $\frac{k}{n+k}$

Итоговая вероятность для этого случая: $\frac{1}{2} \times \frac{k}{n+k} = \frac{k}{2(n+k)}$

### Итоговая вероятность вытащить пронумерованный шар:

$P = \frac{1}{2} + \frac{k}{2(n+k)} = \frac{1}{2} \left( 1 + \frac{k}{n+k} \right)$

Подставим $n = 100$:

$P = \frac{1}{2} \left( 1 + \frac{k}{100+k} \right)$

Для максимизации этой вероятности возьмем производную $P$ по $k$ и найдем критическую точку.

### Найдем производную $P$:

$P(k) = \frac{1}{2} \left( 1 + \frac{k}{100+k} \right)$

$P(k) = \frac{1}{2} + \frac{k}{2(100+k)}$

$P'(k) = \frac{1}{2} \left( \frac{(100+k) - k}{(100+k)^2} \right)$
$P'(k) = \frac{1}{2} \left( \frac{100}{(100+k)^2} \right)$

Положим производную равной нулю и решим уравнение:

$\frac{100}{(100+k)^2} = 0$

Это уравнение не имеет решений, так как числитель $100$ никогда не станет равным нулю. Следовательно, функция вероятности $P(k)$ возрастает с увеличением $k$.

Максимальная вероятность достигается при максимальном $k$. В данном случае, максимальное значение $k = 100$, т.е. все 100 шаров перемещаются в другой мешок.

### Подставим $k = 100$ в формулу для вероятности:

$P = \frac{1}{2} \left( 1 + \frac{100}{100+100} \right) = \frac{1}{2} \left( 1 + \frac{100}{200} \right) = \frac{1}{2} \left( 1 + 0.5 \right) = \frac{1}{2} \times 1.5 = 0.75$

Итак, максимальная вероятность вытащить пронумерованный шар составляет 75% при перемещении всех 100 шаров из одного мешка в другой.

## Дождь в МСК (врут ли москвичи)
Вы летите в Москву и хотите решить, стоит ли брать зонт. Вы звоните
трем случайным москвичам и спрашиваете, идёт ли дождь. Каждый
из них говорит правду с вероятностью 3/5, а с вероятностью 2/5
обманывает вас. Каждый утверждает, что у него за окном идёт дождь.
Какова вероятность, что он идет на самом деле? В среднем в Москве
30 дождливых дней за год. Опишите процесс решения.

Для решения задачи будем использовать теорему Байеса. Обозначим:

- $A$ — событие, что идет дождь.
- $B$ — событие, что москвич сказал, что идет дождь.

### Дано:
- Вероятность того, что москвич говорит правду $P(B|A)$: $\frac{3}{5}$.
- Вероятность того, что москвич обманывает $P(B|\neg A)$: $\frac{2}{5}$.
- Вероятность дождливого дня в Москве $P(A)$: $\frac{30}{365}$.
- Вероятность сухого дня $P(\neg A)$: $\frac{335}{365}$.

### Найти:
- Вероятность того, что идет дождь, при условии, что москвич сказал, что идет дождь $P(A|B)$.

Используем теорему Байеса:

$P(A|B) = \frac{P(B|A) \cdot P(A)}{P(B)}$

Где $P(B)$ — полная вероятность события $B$:

$P(B) = P(B|A) \cdot P(A) + P(B|\neg A) \cdot P(\neg A)$

Подставим значения:

$P(B) = \frac{3}{5} \cdot \frac{30}{365} + \frac{2}{5} \cdot \frac{335}{365}$

### Рассчитаем $P(B)$:

$P(B) = \frac{3}{5} \cdot \frac{30}{365} + \frac{2}{5} \cdot \frac{335}{365}$

$P(B) = \frac{3 \cdot 30}{5 \cdot 365} + \frac{2 \cdot 335}{5 \cdot 365}$

$P(B) = \frac{90}{1825} + \frac{670}{1825}$

$P(B) = \frac{760}{1825}$

Теперь, используя теорему Байеса:

$P(A|B) = \frac{P(B|A) \cdot P(A)}{P(B)}$

$P(A|B) = \frac{\frac{3}{5} \cdot \frac{30}{365}}{\frac{760}{1825}}$

Упростим числитель и знаменатель:

$P(A|B) = \frac{\frac{90}{1825}}{\frac{760}{1825}}$

$P(A|B) = \frac{90}{760}$

$P(A|B) = \frac{9}{76}$

Таким образом, вероятность того, что действительно идет дождь, при условии, что три москвича сказали, что идет дождь, составляет $\frac{9}{76}$, или приблизительно 11.8%.

## Шары. Биномиальное распределение. Доверительный интервал.
В корзине 85 чёрных мячей и 15 красных. Вы наугад достаёте мяч из корзины, фиксируете результат и возвращаете его обратно. Оцените 95%-доверительный интервал количества вытянутых красных мячей, если повторить опыт 100 раз. В качестве ответа укажите левую (наименьшую) границу доверительного интервала, округлённую до целого значения вниз. Пример 12.5923 -> ответ 12

### Решение
Для решения задачи оценки 95%-доверительного интервала количества вытянутых красных мячей нужно использовать биномиальное распределение, так как каждый раз, когда мы достаем мяч, фиксируем результат и возвращаем его обратно, у нас есть повторяющиеся независимые испытания с двумя возможными исходами: вытянут красный мяч или черный мяч.

### Шаги решения:
1. Определим параметры биномиального распределения:
- $n = 100$ — количество испытаний (вытягиваний мячей).
- $p = \frac{15}{100} = 0.15$ — вероятность вытянуть красный мяч в каждом испытании.

2. Найдем доверительный интервал для биномиального распределения. В случае большого числа испытаний (обычно $n \geq 30$), биномиальное распределение можно аппроксимировать нормальным распределением с параметрами:
- Среднее значение $\mu = np$.
- Дисперсия $\sigma^2 = np(1-p)$.

3. Вычислим среднее значение и стандартное отклонение:
- Среднее значение $\mu = 100 \times 0.15 = 15$.
- Стандартное отклонение $\sigma = \sqrt{100 \times 0.15 \times (1 - 0.15)} = \sqrt{100 \times 0.15 \times 0.85} = \sqrt{12.75} \approx 3.57$.

4. Найдем 95%-доверительный интервал. Для нормального распределения 95%-доверительный интервал определяется как $\mu \pm 1.96 \sigma$.

5. Вычислим границы интервала:
- Нижняя граница: $15 - 1.96 \times 3.57 \approx 15 - 6.99 \approx 8.01$.
- Верхняя граница: $15 + 1.96 \times 3.57 \approx 15 + 6.99 \approx 21.99$.

6. Округлим нижнюю границу до целого значения вниз:
- Нижняя граница: $\lfloor 8.01 \rfloor = 8$.

### Ответ:
Наименьшая граница 95%-доверительного интервала для количества вытянутых красных мячей за 100 испытаний составляет 8.

## 40 туристов на 400 сувениров.
Группа из 40 туристов прибывает в сувенирный магазин. В магазине обширный выбор из 400 различных позиций, при том в каждой позиции число товаров достаточно, чтобы обслужить всех клиентов. Известно, что каждый турист купил по одному сувениру. Считая выбор туриста равновероятным и независимым, определите вероятность того, что, как минимум два туриста выбрали одинаковые товары. В качестве ответа необходимо указать целое число процентов, округлённое вниз. Пример: 6.612331% -> ответ 6

### Решение
Для решения задачи используем принцип Дирихле и теорию вероятностей.

### Шаги решения
1. Определим вероятность того, что все 40 туристов выбрали различные сувениры из 400 доступных позиций.
2. Используем формулу для подсчета вероятности события, что хотя бы два туриста выбрали одинаковый сувенир.

### Расчет вероятности
Для начала найдем вероятность того, что все туристы выбрали различные сувениры. Это задача аналогична задаче о днях рождения, где нам нужно посчитать вероятность того, что у 40 человек нет совпадения дней рождения, но в нашем случае мы работаем с 400 сувенирами.

1. **Количество способов выбрать 40 различных сувениров из 400:**
Пусть $n = 400$ — количество различных позиций сувениров (ящиков Дирихле) и $k = 40$ — количество туристов.

2. **Количество благоприятных исходов для задачи выбора всеми туристами разных сувениров:**
Для первого туриста есть 400 вариантов выбора сувенира, для второго — 399, для третьего — 398 и так далее, пока для сорокового — 361.

Общее количество благоприятных исходов:

$400 \times 399 \times 398 \times \ldots \times 361$

3. **Общее количество возможных исходов:**
Каждый из 40 туристов может выбрать любой из 400 сувениров:
$400^{40}$

4. **Вероятность того, что все туристы выбрали различные сувениры:**
$P(\text{все разные}) = \frac{400 \times 399 \times 398 \times \ldots \times 361}{400^{40}}$

Это можно записать как:  
$P(\text{все разные}) = \frac{400!}{(400-40)! \cdot 400^{40}}$

5. **Вероятность того, что хотя бы два туриста выбрали одинаковый сувенир:**
$P(\text{повторение}) = 1 - P(\text{все разные})$

### Приближенный расчет с помощью формулы для вероятности совпадений:
Для больших $n$ и $k$, как в нашем случае, удобно использовать приближение:

$P(\text{все разные}) \approx e^{-\frac{k^2}{2n}}$

Подставляем $n = 400$ и $k = 40$:

$P(\text{все разные}) \approx e^{-\frac{40^2}{2 \cdot 400}} = e^{-2} \approx 0.1353$

Тогда вероятность того, что хотя бы два туриста выбрали одинаковый сувенир:

$P(\text{повторение}) = 1 - P(\text{все разные}) \approx 1 - 0.1353 = 0.8647$

### Перевод в проценты и округление:
$P(\text{повторение}) \approx 0.8647 \times 100 \approx 86.47\%$

Округляя вниз до целого числа:
$\boxed{86}$

Итак, вероятность того, что как минимум два туриста выбрали одинаковые сувениры, составляет 86%.
