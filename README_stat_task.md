## Два мешка в палатке. Стратегия подготовки
Вы вместе с другом или подругой находитесь на прогулке. К вам
подходит ведущий и предлагает поучаствовать в простом конкурсе.
Условия конкурса: есть закрытая и звукоизолированная палатка,
внутри находятся два мешка с бильярдными шарами по 100 шаров в
каждом. Шары в одном мешке имеют номера на них, шары во втором -
не содержат номеров. Ваш друг или подруга могут зайти в шатер и
как-то повзаимодействовать с шарами, например, переложить их из
одного мешка в другой. Забирать с собой или оставлять шар вне
мешка нельзя. После вашего спутника вы так же заходите в палатку.
Перед вашим заходом шары внутри каждого из мешков
перемешиваются. Ваша цель - вытащить шар с номером на нем.
Вытаскивать шар вы будете вслепую, т.е. не видя содержимое мешка
(и сколько в нем шаров, например). Вытащить можно только один
шар. Перед началом этого конкурса у вас есть возможность обсудить
со своим другом или подругой стратегию, чтобы максимизировать
шансы вытащить нужный шар. Какую стратегию вы выберете и
почему?

Для оптимизации количества перекладываемых шаров и нахождения максимальной вероятности, нужно проанализировать вероятности в общем виде. Пусть $k$ — количество пронумерованных шаров, перемещенных из мешка с номерами в мешок без номеров.

Обозначим:
- $n = 100$ — общее количество шаров в каждом мешке.
- $k$ — количество пронумерованных шаров, перемещенных в другой мешок.

Тогда:
- В мешке с номерами остается $n - k$ пронумерованных шаров.
- В мешке без номеров будет $k$ пронумерованных шаров и $n$ непомеченных шаров.

### Общая вероятность

1. **Если вы выбрали мешок с $n - k$ пронумерованными шарами:**
- Вероятность выбрать этот мешок: $\frac{1}{2}$
- Вероятность вытащить пронумерованный шар из этого мешка: $\frac{n-k}{n-k} = 1$

Итоговая вероятность для этого случая: $\frac{1}{2} \times 1 = \frac{1}{2}$

2. **Если вы выбрали мешок с $k$ пронумерованными шарами и $n$ непомеченными шарами:**
- Вероятность выбрать этот мешок: $\frac{1}{2}$
- Вероятность вытащить пронумерованный шар из этого мешка: $\frac{k}{n+k}$

Итоговая вероятность для этого случая: $\frac{1}{2} \times \frac{k}{n+k} = \frac{k}{2(n+k)}$

### Итоговая вероятность вытащить пронумерованный шар:

$P = \frac{1}{2} + \frac{k}{2(n+k)} = \frac{1}{2} \left( 1 + \frac{k}{n+k} \right)$

Подставим $n = 100$:

$P = \frac{1}{2} \left( 1 + \frac{k}{100+k} \right)$

Для максимизации этой вероятности возьмем производную $P$ по $k$ и найдем критическую точку.

### Найдем производную $P$:

$P(k) = \frac{1}{2} \left( 1 + \frac{k}{100+k} \right)$

$P(k) = \frac{1}{2} + \frac{k}{2(100+k)}$

$P'(k) = \frac{1}{2} \left( \frac{(100+k) - k}{(100+k)^2} \right)$
$P'(k) = \frac{1}{2} \left( \frac{100}{(100+k)^2} \right)$

Положим производную равной нулю и решим уравнение:

$\frac{100}{(100+k)^2} = 0$

Это уравнение не имеет решений, так как числитель $100$ никогда не станет равным нулю. Следовательно, функция вероятности $P(k)$ возрастает с увеличением $k$.

Максимальная вероятность достигается при максимальном $k$. В данном случае, максимальное значение $k = 100$, т.е. все 100 шаров перемещаются в другой мешок.

### Подставим $k = 100$ в формулу для вероятности:

$P = \frac{1}{2} \left( 1 + \frac{100}{100+100} \right) = \frac{1}{2} \left( 1 + \frac{100}{200} \right) = \frac{1}{2} \left( 1 + 0.5 \right) = \frac{1}{2} \times 1.5 = 0.75$

Итак, максимальная вероятность вытащить пронумерованный шар составляет 75% при перемещении всех 100 шаров из одного мешка в другой.

## Дождь в МСК (врут ли москвичи)
Вы летите в Москву и хотите решить, стоит ли брать зонт. Вы звоните
трем случайным москвичам и спрашиваете, идёт ли дождь. Каждый
из них говорит правду с вероятностью 3/5, а с вероятностью 2/5
обманывает вас. Каждый утверждает, что у него за окном идёт дождь.
Какова вероятность, что он идет на самом деле? В среднем в Москве
30 дождливых дней за год. Опишите процесс решения.

Для решения задачи будем использовать теорему Байеса. Обозначим:

- $A$ — событие, что идет дождь.
- $B$ — событие, что москвич сказал, что идет дождь.

### Дано:
- Вероятность того, что москвич говорит правду $P(B|A)$: $\frac{3}{5}$.
- Вероятность того, что москвич обманывает $P(B|\neg A)$: $\frac{2}{5}$.
- Вероятность дождливого дня в Москве $P(A)$: $\frac{30}{365}$.
- Вероятность сухого дня $P(\neg A)$: $\frac{335}{365}$.

### Найти:
- Вероятность того, что идет дождь, при условии, что москвич сказал, что идет дождь $P(A|B)$.

Используем теорему Байеса:

$P(A|B) = \frac{P(B|A) \cdot P(A)}{P(B)}$

Где $P(B)$ — полная вероятность события $B$:

$P(B) = P(B|A) \cdot P(A) + P(B|\neg A) \cdot P(\neg A)$

Подставим значения:

$P(B) = \frac{3}{5} \cdot \frac{30}{365} + \frac{2}{5} \cdot \frac{335}{365}$

### Рассчитаем $P(B)$:

$P(B) = \frac{3}{5} \cdot \frac{30}{365} + \frac{2}{5} \cdot \frac{335}{365}$

$P(B) = \frac{3 \cdot 30}{5 \cdot 365} + \frac{2 \cdot 335}{5 \cdot 365}$

$P(B) = \frac{90}{1825} + \frac{670}{1825}$

$P(B) = \frac{760}{1825}$

Теперь, используя теорему Байеса:

$P(A|B) = \frac{P(B|A) \cdot P(A)}{P(B)}$

$P(A|B) = \frac{\frac{3}{5} \cdot \frac{30}{365}}{\frac{760}{1825}}$

Упростим числитель и знаменатель:

$P(A|B) = \frac{\frac{90}{1825}}{\frac{760}{1825}}$

$P(A|B) = \frac{90}{760}$

$P(A|B) = \frac{9}{76}$

Таким образом, вероятность того, что действительно идет дождь, при условии, что три москвича сказали, что идет дождь, составляет $\frac{9}{76}$, или приблизительно 11.8%.
